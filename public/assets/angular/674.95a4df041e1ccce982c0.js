(self.webpackChunknguide_pricelist_ui=self.webpackChunknguide_pricelist_ui||[]).push([[674],{3674:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ResourcesModule:()=>Ve});var s=i(8583),o=i(9486),n=i(7029),r=i(3289),l=i(739),a=i(7716),c=i(264),d=i(1873),u=i(8272),h=i(3679),p=i(4395),f=i(7519),m=i(5435),g=i(8935),b=i(1103),v=i(7238),w=i(7435);const _=function(e){return{dropdown:e}},x=["*"];let y=(()=>{class e{constructor(){this.autoClose=!0,this.insideClick=!1,this.isAnimated=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,a.Yz7)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),C=(()=>{class e{constructor(){this.direction="down",this.autoClose=!0,this.insideClick=!1,this.isAnimated=!1,this.isOpenChange=new a.vpe,this.isDisabledChange=new a.vpe,this.toggleClick=new a.vpe,this.dropdownMenu=new Promise(e=>{this.resolveDropdownMenu=e})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e})();const Z=[(0,v.oB)({height:0,overflow:"hidden"}),(0,v.jt)("220ms cubic-bezier(0, 0, 0.2, 1)",(0,v.oB)({height:"*",overflow:"hidden"}))];let A=(()=>{class e{constructor(e,t,i,s,o){this._state=e,this.cd=t,this._renderer=i,this._element=s,this.isOpen=!1,this._factoryDropDownAnimation=o.build(Z),this._subscription=e.isOpenChange.subscribe(e=>{this.isOpen=e;const t=this._element.nativeElement.querySelector(".dropdown-menu");this._renderer.addClass(this._element.nativeElement.querySelector("div"),"open"),t&&!(0,b.XA)()&&(this._renderer.addClass(t,"show"),t.classList.contains("dropdown-menu-right")&&(this._renderer.setStyle(t,"left","auto"),this._renderer.setStyle(t,"right","0")),"up"===this.direction&&(this._renderer.setStyle(t,"top","auto"),this._renderer.setStyle(t,"transform","translateY(-101%)"))),t&&this._state.isAnimated&&this._factoryDropDownAnimation.create(t).play(),this.cd.markForCheck(),this.cd.detectChanges()})}get direction(){return this._state.direction}_contains(e){return this._element.nativeElement.contains(e)}ngOnDestroy(){this._subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(C),a.Y36(a.sBO),a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(v._j))},e.\u0275cmp=a.Xpm({type:e,selectors:[["bs-dropdown-container"]],hostAttrs:[2,"display","block","position","absolute","z-index","1040"],ngContentSelectors:x,decls:2,vars:9,consts:[[3,"ngClass"]],template:function(e,t){1&e&&(a.F$t(),a.TgZ(0,"div",0),a.Hsn(1),a.qZA()),2&e&&(a.ekj("dropup","up"===t.direction)("show",t.isOpen)("open",t.isOpen),a.Q6J("ngClass",a.VKq(7,_,"down"===t.direction)))},directives:[s.mk],encapsulation:2,changeDetection:0}),e})(),N=(()=>{class e{constructor(e,t,i,s,o,n,r){this._elementRef=e,this._renderer=t,this._viewContainerRef=i,this._cis=s,this._state=o,this._config=n,this.dropup=!1,this._isInlineOpen=!1,this._isDisabled=!1,this._subscriptions=[],this._isInited=!1,this._state.autoClose=this._config.autoClose,this._state.insideClick=this._config.insideClick,this._state.isAnimated=this._config.isAnimated,this._factoryDropDownAnimation=r.build(Z),this._dropdown=this._cis.createLoader(this._elementRef,this._viewContainerRef,this._renderer).provide({provide:C,useValue:this._state}),this.onShown=this._dropdown.onShown,this.onHidden=this._dropdown.onHidden,this.isOpenChange=this._state.isOpenChange}set autoClose(e){this._state.autoClose=e}get autoClose(){return this._state.autoClose}set isAnimated(e){this._state.isAnimated=e}get isAnimated(){return this._state.isAnimated}set insideClick(e){this._state.insideClick=e}get insideClick(){return this._state.insideClick}set isDisabled(e){this._isDisabled=e,this._state.isDisabledChange.emit(e),e&&this.hide()}get isDisabled(){return this._isDisabled}get isOpen(){return this._showInline?this._isInlineOpen:this._dropdown.isShown}set isOpen(e){e?this.show():this.hide()}get isBs4(){return!(0,b.XA)()}get _showInline(){return!this.container}ngOnInit(){this._isInited||(this._isInited=!0,this._dropdown.listen({outsideClick:!1,triggers:this.triggers,show:()=>this.show()}),this._subscriptions.push(this._state.toggleClick.subscribe(e=>this.toggle(e))),this._subscriptions.push(this._state.isDisabledChange.pipe((0,m.h)(e=>e)).subscribe(()=>this.hide())))}show(){if(!this.isOpen&&!this.isDisabled)return this._showInline?(this._inlinedMenu||this._state.dropdownMenu.then(e=>{this._dropdown.attachInline(e.viewContainer,e.templateRef),this._inlinedMenu=this._dropdown._inlineViewRef,this.addBs4Polyfills(),this._inlinedMenu&&this._renderer.addClass(this._inlinedMenu.rootNodes[0].parentNode,"open"),this.playAnimation()}).catch(),this.addBs4Polyfills(),this._isInlineOpen=!0,this.onShown.emit(!0),this._state.isOpenChange.emit(!0),void this.playAnimation()):void this._state.dropdownMenu.then(e=>{const t=this.dropup||void 0!==this.dropup&&this.dropup;this._state.direction=t?"up":"down";const i=this.placement||(t?"top start":"bottom start");this._dropdown.attach(A).to(this.container).position({attachment:i}).show({content:e.templateRef,placement:i}),this._state.isOpenChange.emit(!0)}).catch()}hide(){this.isOpen&&(this._showInline?(this.removeShowClass(),this.removeDropupStyles(),this._isInlineOpen=!1,this.onHidden.emit(!0)):this._dropdown.hide(),this._state.isOpenChange.emit(!1))}toggle(e){return this.isOpen||!e?this.hide():this.show()}_contains(e){return this._elementRef.nativeElement.contains(e.target)||this._dropdown.instance&&this._dropdown.instance._contains(e.target)}ngOnDestroy(){for(const e of this._subscriptions)e.unsubscribe();this._dropdown.dispose()}addBs4Polyfills(){(0,b.XA)()||(this.addShowClass(),this.checkRightAlignment(),this.addDropupStyles())}playAnimation(){this._state.isAnimated&&this._inlinedMenu&&setTimeout(()=>{this._inlinedMenu&&this._factoryDropDownAnimation.create(this._inlinedMenu.rootNodes[0]).play()})}addShowClass(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&this._renderer.addClass(this._inlinedMenu.rootNodes[0],"show")}removeShowClass(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&this._renderer.removeClass(this._inlinedMenu.rootNodes[0],"show")}checkRightAlignment(){if(this._inlinedMenu&&this._inlinedMenu.rootNodes[0]){const e=this._inlinedMenu.rootNodes[0].classList.contains("dropdown-menu-right");this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"left",e?"auto":"0"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"right",e?"0":"auto")}}addDropupStyles(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&(this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"top",this.dropup?"auto":"100%"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"transform",this.dropup?"translateY(-101%)":"translateY(0)"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"bottom","auto"))}removeDropupStyles(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&(this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"top"),this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"transform"),this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"bottom"))}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(a.s_b),a.Y36(g.oj),a.Y36(C),a.Y36(y),a.Y36(v._j))},e.\u0275dir=a.lG2({type:e,selectors:[["","bsDropdown",""],["","dropdown",""]],hostVars:6,hostBindings:function(e,t){2&e&&a.ekj("dropup",t.dropup)("open",t.isOpen)("show",t.isOpen&&t.isBs4)},inputs:{dropup:"dropup",autoClose:"autoClose",isAnimated:"isAnimated",insideClick:"insideClick",isDisabled:"isDisabled",isOpen:"isOpen",placement:"placement",triggers:"triggers",container:"container"},outputs:{onShown:"onShown",onHidden:"onHidden",isOpenChange:"isOpenChange"},exportAs:["bs-dropdown"],features:[a._Bn([C])]}),e})(),I=(()=>{class e{constructor(e,t,i){e.resolveDropdownMenu({templateRef:i,viewContainer:t})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(C),a.Y36(a.s_b),a.Y36(a.Rgc))},e.\u0275dir=a.lG2({type:e,selectors:[["","bsDropdownMenu",""],["","dropdownMenu",""]],exportAs:["bs-dropdown-menu"]}),e})(),k=(()=>{class e{constructor(e,t,i,s,o){this._changeDetectorRef=e,this._dropdown=t,this._element=i,this._renderer=s,this._state=o,this.isOpen=!1,this._subscriptions=[],this._subscriptions.push(this._state.isOpenChange.subscribe(e=>{this.isOpen=e,e?(this._documentClickListener=this._renderer.listen("document","click",e=>{!this._state.autoClose||2===e.button||this._element.nativeElement.contains(e.target)||this._state.insideClick&&this._dropdown._contains(e)||(this._state.toggleClick.emit(!1),this._changeDetectorRef.detectChanges())}),this._escKeyUpListener=this._renderer.listen(this._element.nativeElement,"keyup.esc",()=>{this._state.autoClose&&(this._state.toggleClick.emit(!1),this._changeDetectorRef.detectChanges())})):(this._documentClickListener&&this._documentClickListener(),this._escKeyUpListener&&this._escKeyUpListener())})),this._subscriptions.push(this._state.isDisabledChange.subscribe(e=>this.isDisabled=e||void 0))}onClick(e){e.stopPropagation(),this.isDisabled||this._state.toggleClick.emit(!0)}ngOnDestroy(){this._documentClickListener&&this._documentClickListener(),this._escKeyUpListener&&this._escKeyUpListener();for(const e of this._subscriptions)e.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(a.sBO),a.Y36(N),a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(C))},e.\u0275dir=a.lG2({type:e,selectors:[["","bsDropdownToggle",""],["","dropdownToggle",""]],hostVars:3,hostBindings:function(e,t){1&e&&a.NdJ("click",function(e){return t.onClick(e)}),2&e&&a.uIk("aria-haspopup",!0)("aria-expanded",t.isOpen)("disabled",t.isDisabled)},exportAs:["bs-dropdown-toggle"]}),e})(),O=(()=>{class e{static forRoot(){return{ngModule:e,providers:[g.oj,w.sA,C]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[s.ez]]}),e})();var q=i(3500);function S(e,t){if(1&e&&(a.TgZ(0,"span",7),a._uU(1),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.hij(" ",e.nrFilters," ")}}function T(e,t){if(1&e){const e=a.EpF();a.ynx(0),a.TgZ(1,"form",10),a.NdJ("ngSubmit",function(){return a.CHM(e),a.oxw(3).submit()}),a._UZ(2,"formly-form",11),a.qZA(),a.TgZ(3,"button",12),a.NdJ("click",function(){return a.CHM(e),a.oxw(3).reset()}),a._uU(4,"Reset"),a.qZA(),a.BQk()}if(2&e){const e=a.oxw(3);a.xp6(1),a.Q6J("formGroup",e.form),a.xp6(1),a.Q6J("model",e.model)("fields",e.fields)("options",e.options)("form",e.form)}}function J(e,t){if(1&e&&(a.TgZ(0,"div",8),a.YNc(1,T,5,5,"ng-container",9),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.Q6J("ngIf",e.form&&e.fields)}}function Y(e,t){if(1&e&&(a.TgZ(0,"div",1),a.TgZ(1,"button",2),a._UZ(2,"i",3),a._UZ(3,"span",4),a.YNc(4,S,2,1,"span",5),a.qZA(),a.YNc(5,J,2,1,"div",6),a.qZA()),2&e){const e=a.oxw();a.Q6J("insideClick",!0),a.xp6(4),a.Q6J("ngIf",e.nrFilters>0)}}let M=(()=>{class e{constructor(e){this.resourcesService=e,this.resourceName="",this.filtersChange=new a.vpe,this.form=new h.cw({}),this.model={},this.options={},this.fields=[]}get nrFilters(){return this.resourcesService.nrNonEmptyFilters(this.form.value)}ngOnInit(){this.form.valueChanges.pipe((0,p.b)(700),(0,f.x)()).subscribe(e=>{e&&this.fields&&this.filtersChange.emit(this.resourcesService.getFilterableOptions(e,this.fields))})}ngOnChanges(e){var t;(null===(t=null==e?void 0:e.resourceName)||void 0===t?void 0:t.currentValue)&&this.resourcesService.getFilters(e.resourceName.currentValue).subscribe(e=>{this.fields=e})}reset(){for(const e in this.model)this.model.hasOwnProperty(e)&&(this.model[e]=null);this.form.patchValue(this.model)}submit(){}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(o.z6))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-filters"]],inputs:{resourceName:"resourceName",filters:"filters"},outputs:{filtersChange:"filtersChange"},features:[a.TTD],decls:1,vars:1,consts:[["class","btn-group","dropdown","","placement","bottom right","container","body",3,"insideClick",4,"ngIf"],["dropdown","","placement","bottom right","container","body",1,"btn-group",3,"insideClick"],["id","button-basic","dropdownToggle","","type","button","aria-controls","dropdown-basic","title","Filter",1,"btn","btn-primary","dropdown-toggle"],[1,"bi","bi-funnel"],[1,"caret"],["class","position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",4,"ngIf"],["id","dropdown-basic","class","dropdown-menu p-2 filter-dropdown dropdown-menu-right","role","menu","aria-labelledby","button-basic",4,"dropdownMenu"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-danger"],["id","dropdown-basic","role","menu","aria-labelledby","button-basic",1,"dropdown-menu","p-2","filter-dropdown","dropdown-menu-right"],[4,"ngIf"],[3,"formGroup","ngSubmit"],[3,"model","fields","options","form"],[1,"btn","btn-danger","mt-2","w-100",3,"click"]],template:function(e,t){1&e&&a.YNc(0,Y,6,2,"div",0),2&e&&a.Q6J("ngIf",t.fields&&t.fields.length)},directives:[s.O5,N,k,I,h._Y,h.JL,h.sg,q.T7],styles:["[_nghost-%COMP%]     .form-group label{font-size:.8rem}[_nghost-%COMP%]     .form-group .form-control{min-height:calc(1.5em + .5rem + 2px);padding:.25rem .5rem;font-size:.875rem;border-radius:.2rem}"]}),e})();var Q=i(8550);const D=function(){return["create"]};function U(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",2),a.TgZ(1,"div",3),a.TgZ(2,"h2",4),a._uU(3),a.qZA(),a.TgZ(4,"div",5),a.TgZ(5,"app-filters",6),a.NdJ("filtersChange",function(t){return a.CHM(e),a.oxw().filtersChange(t)}),a.qZA(),a.TgZ(6,"a",7),a._UZ(7,"i",8),a._uU(8," Create new"),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(3),a.Oqu(e.resourceInfo.pluralLabel),a.xp6(2),a.Q6J("resourceName",e.resourceName),a.xp6(1),a.Q6J("routerLink",a.DdM(3,D))}}function L(e,t){1&e&&a.GkF(0)}function R(e,t){if(1&e&&(a.TgZ(0,"div",17),a._uU(1),a.qZA()),2&e){const e=a.oxw().value,t=a.oxw(3);a.Q6J("title",t.getTranslatedValue(e)),a.xp6(1),a.Oqu(t.getTranslatedValue(e))}}function E(e,t){if(1&e&&(a.TgZ(0,"div",17),a._uU(1),a.qZA()),2&e){const e=a.oxw().value;a.Q6J("title",e),a.xp6(1),a.Oqu(e)}}function F(e,t){if(1&e&&(a.YNc(0,L,1,0,"ng-container",14),a.YNc(1,R,2,2,"ng-template",null,15,a.W1O),a.YNc(3,E,2,2,"ng-template",null,16,a.W1O)),2&e){const e=a.MAs(2),t=a.MAs(4),i=a.oxw().$implicit;a.Q6J("ngIf",null==i?null:i.translatable)("ngIfThen",e)("ngIfElse",t)}}function j(e,t){if(1&e&&(a.TgZ(0,"ngx-datatable-column",13),a.YNc(1,F,5,3,"ng-template",12),a.qZA()),2&e){const e=t.$implicit;a.Q6J("name",e.name)("path",e.path)("prop",e.prop)("draggable",e.draggable)("resizeable",e.resizeable)("sortable",e.sortable)("flexGrow",e.flexGrow)}}const B=function(e){return[e,"edit"]};function H(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",18),a.TgZ(1,"div",19),a.TgZ(2,"a",20),a._UZ(3,"i",21),a._uU(4," Edit"),a.qZA(),a.TgZ(5,"a",22),a.NdJ("click",function(){const t=a.CHM(e).row;return a.oxw(2).remove(t.id)}),a._UZ(6,"i",23),a._uU(7," Remove"),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=t.row;a.xp6(2),a.Q6J("routerLink",a.VKq(1,B,e.id))}}function P(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ngx-datatable",9),a.NdJ("sort",function(t){return a.CHM(e),a.oxw().onSort(t)})("page",function(t){return a.CHM(e),a.oxw().onPaginate(t)}),a.YNc(1,j,2,7,"ngx-datatable-column",10),a.TgZ(2,"ngx-datatable-column",11),a.YNc(3,H,8,3,"ng-template",12),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.Q6J("rows",e.rows)("headerHeight","auto")("footerHeight","auto")("rowHeight","auto")("columnMode",e.columnMode)("limit",e.listResponse.per_page)("count",e.listResponse.total)("offset",e.listResponse.current_page-1)("externalSorting",!0)("externalPaging",!0)("loadingIndicator",e.loadingIndicator),a.xp6(1),a.Q6J("ngForOf",e.columns),a.xp6(1),a.Q6J("name","Actions")("draggable",!1)("resizeable",!1)("sortable",!1)("flexGrow",0)}}let V=(()=>{class e extends r.i{constructor(e,t,i,s,o){super(t,o),this.activatedRoute=e,this.resourcesService=t,this.alertsService=i,this.breadcrumbService=s,this.tableService=o}ngOnInit(){(0,l.aj)([this.activatedRoute.paramMap,this.activatedRoute.queryParamMap]).subscribe(([e,t])=>{this.resourceName=e.get("name"),this.filtersData=JSON.parse(t.get("filters","{}")),this.resourceName&&this.resourcesService.getResourceInfo(this.resourceName).subscribe(e=>{this.resourceInfo=e,this.initBreadcrumb(),this.resourceName&&this.loadData(this.resourceName,new o.CE({resource:this.resourceName,filters:this.filtersData}))})})}filtersChange(e){this.resourceName&&e&&this.onFilter(e)}remove(e){confirm("Are you sure you want to remove this item?")&&this.resourceName&&this.resourcesService.removeResource(this.resourceName,e).subscribe(e=>{this.resourceName&&(this.alertsService.show(n.NK.success,"Resource Removed!"),this.resourcesService.onTableData.next(new o.CE({resource:this.resourceName,sorting:this.sort,page:this.page,filters:this.filters})))})}initBreadcrumb(){var e;this.breadcrumbService.setBreadcrumb([{label:"Home",path:["/dashboard"]},{label:(null===(e=this.resourceInfo)||void 0===e?void 0:e.pluralLabel)||"Resource",path:[`/resources/${this.resourceName}`]}]),this.breadcrumbService.update()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(c.gz),a.Y36(o.z6),a.Y36(n.ml),a.Y36(d.p),a.Y36(u.w))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-list"]],features:[a.qOj],decls:2,vars:2,consts:[["class","pt-4 row sticky-top bg-white overflow-hidden pb-2 border-bottom",4,"ngIf"],["class","material m-0 mb-4",3,"rows","headerHeight","footerHeight","rowHeight","columnMode","limit","count","offset","externalSorting","externalPaging","loadingIndicator","sort","page",4,"ngIf"],[1,"pt-4","row","sticky-top","bg-white","overflow-hidden","pb-2","border-bottom"],[1,"row"],[1,"col-9"],[1,"col-3","text-end"],[1,"me-2",3,"resourceName","filtersChange"],[1,"btn","btn-success",3,"routerLink"],[1,"bi","bi-plus-circle"],[1,"material","m-0","mb-4",3,"rows","headerHeight","footerHeight","rowHeight","columnMode","limit","count","offset","externalSorting","externalPaging","loadingIndicator","sort","page"],[3,"name","path","prop","draggable","resizeable","sortable","flexGrow",4,"ngFor","ngForOf"],[3,"name","draggable","resizeable","sortable","flexGrow"],["ngx-datatable-cell-template",""],[3,"name","path","prop","draggable","resizeable","sortable","flexGrow"],[4,"ngIf","ngIfThen","ngIfElse"],["thenBlock",""],["elseBlock",""],[1,"text-truncate","pr-2",3,"title"],[1,"text-end"],[1,"btn-group"],[1,"btn","btn-success","btn-sm",3,"routerLink"],[1,"bi","bi-pencil"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-trash"]],template:function(e,t){1&e&&(a.YNc(0,U,9,4,"div",0),a.YNc(1,P,4,17,"ngx-datatable",1)),2&e&&(a.Q6J("ngIf",t.resourceInfo),a.xp6(1),a.Q6J("ngIf",!t.loadingIndicator))},directives:[s.O5,M,c.yS,Q.nE,s.sg,Q.UC,Q.vq],styles:[""]}),e})();var z=i(6215),G=i(5796);function $(e,t){if(1&e&&(a.TgZ(0,"option",10),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.Q6J("value",e.key),a.xp6(1),a.Oqu(e.value)}}function X(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).preview()}),a._UZ(1,"i",12),a._uU(2," Preview "),a.qZA()}}function K(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).setPrices()}),a._UZ(1,"i",13),a._uU(2," Set Prices "),a.qZA()}}function W(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"button",14),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).submit()}),a._UZ(1,"i",15),a._uU(2," Save "),a.qZA()}if(2&e){const e=a.oxw(2);a.Q6J("disabled",!e.form.valid)}}function ee(e,t){if(1&e){const e=a.EpF();a.ynx(0),a.TgZ(1,"div",1),a.TgZ(2,"h2",2),a._uU(3),a.qZA(),a.TgZ(4,"div",3),a.TgZ(5,"select",4),a.YNc(6,$,2,2,"option",5),a.qZA(),a.YNc(7,X,3,0,"button",6),a.YNc(8,K,3,0,"button",6),a.YNc(9,W,3,1,"button",7),a.qZA(),a.qZA(),a.TgZ(10,"form",8),a.NdJ("ngSubmit",function(){return a.CHM(e),a.oxw().submit()}),a._UZ(11,"formly-form",9),a.qZA(),a.BQk()}if(2&e){const e=a.oxw();a.xp6(3),a.AsE("","create"===e.action?"Create":"Edit"," ",e.resourceInfo.label,""),a.xp6(2),a.Q6J("formControl",e.languageControl),a.xp6(1),a.Q6J("ngForOf",e.locales),a.xp6(1),a.Q6J("ngIf",e.isPriceList),a.xp6(1),a.Q6J("ngIf",e.isPriceList),a.xp6(1),a.Q6J("ngIf",e.form),a.xp6(1),a.Q6J("formGroup",e.form),a.xp6(1),a.Q6J("model",e.model)("fields",e.fields)("options",e.options)("form",e.form)}}let te=(()=>{class e{constructor(e,t,i,s,o,n,r){this.activatedRoute=e,this.router=t,this.formlyConfig=i,this.formService=s,this.alertsService=o,this.breadcrumbService=n,this.resourcesService=r,this.resourceName=null,this.resourceId=null,this.resourceInfo=null,this.form=new h.cw({}),this.languageControl=new h.NI(""),this.options={},this.model={},this.fields=[],this.language="en",this.locales=[],this.defaultLocale="nl"}ngOnInit(){this.activatedRoute.paramMap.subscribe(e=>{this.resourceName=e.get("name"),this.resourceId=e.get("id"),this.loadData()}),this.languageControl.valueChanges.subscribe(e=>{e&&this.fields&&this.fields.length>0&&(this.fields=this.mapFields(this.fields,e))})}get isPriceList(){return"priceList"===this.resourceName}loadData(){this.resourceName&&this.resourcesService.getResourceInfo(this.resourceName).subscribe(e=>{this.resourceInfo=e,this.initBreadcrumb(),this.resourceName&&(this.resourceId?this.resourcesService.getEditResourceSchema(this.resourceName,this.resourceId).subscribe(e=>{this.locales=this.mapLocales(e.locales),this.defaultLocale=e.defaultLocale,this.languageControl.setValue(this.defaultLocale),this.model=e.data||{},this.fields=this.mapFields(e.schema,this.languageControl.value)}):this.resourcesService.getCreateResourceSchema(this.resourceName).subscribe(e=>{this.locales=this.mapLocales(e.locales),this.defaultLocale=e.defaultLocale,this.languageControl.setValue(this.defaultLocale,{emitEvent:!1}),this.model={},this.fields=this.mapFields(e.schema,this.languageControl.value)}))})}mapLocales(e){const t=[];for(const i in e)t.push({key:i,value:e[i]});return t}get action(){return this.resourceId?"edit":"create"}mapFields(e,t){return e.map(e=>{var i;return e.hasOwnProperty("fieldGroup")?e.fieldGroup=this.mapFields(e.fieldGroup,t):"repeat"===e.type&&(e.fieldArray.fieldGroup=this.mapFields(e.fieldArray.fieldGroup,t)),"translatable-input"!==e.type&&"translatable-textarea"!==e.type||((null===(i=e.templateOptions)||void 0===i?void 0:i.language)?e.templateOptions.language.next(t):e.templateOptions.language=new z.X(t),e.wrappers=[...e.wrappers||[],"translatable"]),e.templateOptions.defaultLocale=this.defaultLocale,e})}submit(){this.form&&this.form.valid&&this.resourceName&&(this.resourceId?this.resourcesService.updateResource(this.resourceName,this.resourceId,this.model).subscribe(e=>{this.alertsService.show(n.NK.success,"Resource updated!")}):this.resourcesService.createResource(this.resourceName,this.model).subscribe(e=>{this.router.navigate(["/resources",this.resourceName,e.data._id,"edit"]),this.alertsService.show(n.NK.success,"Resource created!")}))}setPrices(){this.router.navigate(["/price-assign",this.resourceId])}preview(){this.router.navigate(["/price-assign/preview",this.resourceId])}initBreadcrumb(){var e,t;this.breadcrumbService.setBreadcrumb([{label:"Home",path:["/dashboard"]},{label:(null===(e=this.resourceInfo)||void 0===e?void 0:e.pluralLabel)||"Resource",path:[`/resources/${this.resourceName}`]},{label:"Edit "+(null===(t=this.resourceInfo)||void 0===t?void 0:t.label)||0,path:[`/resources/${this.resourceName}`]}]),this.breadcrumbService.update()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(c.gz),a.Y36(c.F0),a.Y36(q.o),a.Y36(G.w1X),a.Y36(n.ml),a.Y36(d.p),a.Y36(o.z6))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-edit"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"pt-4","row","sticky-top","bg-white","overflow-hidden","border-bottom","pb-2"],[1,"col-6","mb-0"],[1,"col-6","text-end","row","g-3","m-0"],[1,"form-select","col","me-2","mt-0",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["type","button","class","btn btn-primary submit-button me-2 col mt-0",3,"click",4,"ngIf"],["type","button","class","btn btn-primary submit-button col mt-0",3,"disabled","click",4,"ngIf"],[1,"mt-2",3,"formGroup","ngSubmit"],[3,"model","fields","options","form"],[3,"value"],["type","button",1,"btn","btn-primary","submit-button","me-2","col","mt-0",3,"click"],[1,"bi","bi-eye"],[1,"bi","bi-currency-euro"],["type","button",1,"btn","btn-primary","submit-button","col","mt-0",3,"disabled","click"],[1,"bi","bi-save"]],template:function(e,t){1&e&&a.YNc(0,ee,12,12,"ng-container",0),2&e&&a.Q6J("ngIf",t.form&&t.fields&&t.resourceInfo)},directives:[s.O5,h.EJ,h.JJ,h.oH,s.sg,h._Y,h.JL,h.sg,q.T7,h.YN,h.Kr],styles:[""]}),e})();var ie=i(6715),se=i(2114),oe=i(6661),ne=i(4463),re=i(5790),le=i(453);class ae extends q.fS{constructor(){super(...arguments),this.valueControl=new h.NI(""),this.language="",this.translatable=!1}onInit(){this.translatable=!0,this.language=this.to.defaultLocale,this.to.language.subscribe(e=>{if(e){const t=[];this.language=e,this.to.required&&t.push(function(e){return t=>t.value&&"object"==typeof t.value&&t.value.hasOwnProperty(e)&&0!==t.value[e].length?null:{required:{value:t.value}}}(e)),this.formControl.setValidators(t),this.formControl.updateValueAndValidity();let i="";this.formControl.value&&"object"==typeof this.formControl.value&&!Array.isArray(this.formControl.value)&&this.formControl.value.hasOwnProperty(this.language)&&(i=this.formControl.value[this.language]||""),this.valueControl.setValue(i,{emitEvent:!1})}}),this.valueControl.valueChanges.subscribe(e=>{let t=this.formControl.value&&"object"==typeof this.formControl.value&&!Array.isArray(this.formControl.value)?Object.assign({},this.formControl.value):{};t[this.language]=e,this.formControl.setValue(t)})}get displayError(){var e;return null===(e=this.formControl)||void 0===e?void 0:e.invalid}}var ce=i(6858);function de(e,t){if(1&e&&a._UZ(0,"textarea",2),2&e){const e=a.oxw();a.ekj("is-invalid",e.displayError),a.Q6J("formControl",e.valueControl)("cols",e.to.cols)("rows",e.to.rows)("formlyAttributes",e.field)}}function ue(e,t){if(1&e&&a._UZ(0,"quill-editor",3),2&e){const e=a.oxw();a.ekj("is-invalid",e.displayError),a.Q6J("formControl",e.valueControl)}}let he=(()=>{class e extends ae{constructor(){super(...arguments),this.defaultOptions={templateOptions:{cols:1,rows:1}}}ngOnInit(){this.onInit()}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=a.n5z(e)))(i||e)}}(),e.\u0275cmp=a.Xpm({type:e,selectors:[["app-textarea"]],features:[a.qOj],decls:2,vars:2,consts:[["class","form-control",3,"formControl","cols","rows","is-invalid","formlyAttributes",4,"ngIf"],["class","d-block mb-2",3,"formControl","is-invalid",4,"ngIf"],[1,"form-control",3,"formControl","cols","rows","formlyAttributes"],[1,"d-block","mb-2",3,"formControl"]],template:function(e,t){1&e&&(a.YNc(0,de,1,6,"textarea",0),a.YNc(1,ue,1,3,"quill-editor",1)),2&e&&(a.Q6J("ngIf",!(null!=t.to&&t.to.html)),a.xp6(1),a.Q6J("ngIf",null==t.to?null:t.to.html))},directives:[s.O5,h.Fj,h.JJ,h.oH,q.VQ,ce.g6],styles:[""],changeDetection:0}),e})();var pe=i(8366);function fe(e,t){1&e&&(a.TgZ(0,"span"),a._uU(1,"*"),a.qZA())}function me(e,t){if(1&e&&(a.TgZ(0,"label"),a._uU(1),a.YNc(2,fe,2,0,"span",1),a.qZA()),2&e){const e=a.oxw();a.uIk("for",e.id),a.xp6(1),a.hij(" ",e.to.label," "),a.xp6(1),a.Q6J("ngIf",e.to.required&&!0!==e.to.hideRequiredMarker)}}function ge(e,t){}function be(e,t){if(1&e&&(a.TgZ(0,"button",8),a._UZ(1,"i",9),a.qZA()),2&e){a.oxw();const e=a.MAs(9);a.Q6J("adaptivePosition",!0)("popover",e)}}function ve(e,t){if(1&e&&(a.TgZ(0,"div",10),a._UZ(1,"formly-validation-message",11),a.qZA()),2&e){const e=a.oxw();a.Udp("display","block"),a.xp6(1),a.Q6J("field",e.field)}}function we(e,t){if(1&e&&(a.TgZ(0,"small",12),a._uU(1),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Oqu(e.to.description)}}function _e(e,t){if(1&e&&a._UZ(0,"img",14),2&e){const e=a.oxw(2);a.Q6J("src",e.getImg(),a.LSH)}}function xe(e,t){if(1&e&&a.YNc(0,_e,1,1,"img",13),2&e){const e=a.oxw();a.Q6J("ngIf",e.getImg())}}let ye=(()=>{class e extends q.n2{ngOnInit(){}getImg(){var e;if(this.formControl.value){const t=((null===(e=this.field.templateOptions)||void 0===e?void 0:e.options)||[]).find(e=>e.value===this.formControl.value);return null==t?void 0:t.img}}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=a.n5z(e)))(i||e)}}(),e.\u0275cmp=a.Xpm({type:e,selectors:[["app-dropdown-wrapper"]],features:[a.qOj],decls:10,vars:6,consts:[[1,"form-group"],[4,"ngIf"],[1,"input-group"],["fieldComponent",""],["class","btn btn-outline-secondary","type","button","triggers","focus","container","body","placement","auto","title","Preview",3,"adaptivePosition","popover",4,"ngIf"],["class","invalid-feedback",3,"display",4,"ngIf"],["class","form-text text-muted",4,"ngIf"],["popTemplate",""],["type","button","triggers","focus","container","body","placement","auto","title","Preview",1,"btn","btn-outline-secondary",3,"adaptivePosition","popover"],[1,"bi","bi-eye"],[1,"invalid-feedback"],[3,"field"],[1,"form-text","text-muted"],["class","d-block w-100",3,"src",4,"ngIf"],[1,"d-block","w-100",3,"src"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.YNc(1,me,3,3,"label",1),a.TgZ(2,"div",2),a.YNc(3,ge,0,0,"ng-template",null,3,a.W1O),a.YNc(5,be,2,2,"button",4),a.qZA(),a.YNc(6,ve,2,3,"div",5),a.YNc(7,we,2,1,"small",6),a.qZA(),a.YNc(8,xe,1,1,"ng-template",null,7,a.W1O)),2&e&&(a.ekj("has-error",t.showError),a.xp6(1),a.Q6J("ngIf",t.to.label&&!0!==t.to.hideLabel),a.xp6(4),a.Q6J("ngIf",t.getImg()),a.xp6(1),a.Q6J("ngIf",t.showError),a.xp6(1),a.Q6J("ngIf",t.to.description))},directives:[s.O5,pe.k5,q.u_],styles:[".popover{max-width:600px!important}"]}),e})();function Ce(e,t){1&e&&(a.TgZ(0,"span"),a._uU(1,"*"),a.qZA())}function Ze(e,t){if(1&e&&(a.TgZ(0,"span",8),a._uU(1),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.hij(" ",e.language.toUpperCase()," ")}}function Ae(e,t){if(1&e&&(a.TgZ(0,"label",5),a._uU(1),a.YNc(2,Ce,2,0,"span",6),a.YNc(3,Ze,2,1,"span",7),a.qZA()),2&e){const e=a.oxw();a.uIk("for",e.id),a.xp6(1),a.hij(" ",e.to.label," "),a.xp6(1),a.Q6J("ngIf",e.to.required&&!0!==e.to.hideRequiredMarker),a.xp6(1),a.Q6J("ngIf",(null==e.to?null:e.to.translatable)&&e.language)}}function Ne(e,t){}function Ie(e,t){if(1&e&&(a.TgZ(0,"div",9),a._UZ(1,"formly-validation-message",10),a.qZA()),2&e){const e=a.oxw();a.Udp("display","block"),a.xp6(1),a.Q6J("field",e.field)}}function ke(e,t){if(1&e&&(a.TgZ(0,"small",11),a._uU(1),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Oqu(e.to.description)}}let Oe=(()=>{class e extends q.n2{constructor(){super(...arguments),this.language=""}ngOnInit(){var e,t;(null===(e=this.to)||void 0===e?void 0:e.translatable)&&(null===(t=this.to)||void 0===t?void 0:t.language)&&this.to.language.subscribe(e=>{e&&(this.language=e)})}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=a.n5z(e)))(i||e)}}(),e.\u0275cmp=a.Xpm({type:e,selectors:[["app-translatable"]],features:[a.qOj],decls:6,vars:5,consts:[[1,"form-group"],["class","w-100 mt-1",4,"ngIf"],["fieldComponent",""],["class","invalid-feedback",3,"display",4,"ngIf"],["class","form-text text-muted",4,"ngIf"],[1,"w-100","mt-1"],[4,"ngIf"],["class","language badge bg-secondary ms-2 float-end",4,"ngIf"],[1,"language","badge","bg-secondary","ms-2","float-end"],[1,"invalid-feedback"],[3,"field"],[1,"form-text","text-muted"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.YNc(1,Ae,4,4,"label",1),a.YNc(2,Ne,0,0,"ng-template",null,2,a.W1O),a.YNc(4,Ie,2,3,"div",3),a.YNc(5,ke,2,1,"small",4),a.qZA()),2&e&&(a.ekj("has-error",t.showError),a.xp6(1),a.Q6J("ngIf",t.to.label&&!0!==t.to.hideLabel),a.xp6(3),a.Q6J("ngIf",t.showError),a.xp6(1),a.Q6J("ngIf",t.to.description))},directives:[s.O5,q.u_],styles:[""]}),e})();function qe(e,t){if(1&e&&a._UZ(0,"input",2),2&e){const e=a.oxw();a.ekj("is-invalid",e.displayError),a.Q6J("type",e.type)("formControl",e.valueControl)("formlyAttributes",e.field)}}function Se(e,t){if(1&e&&a._UZ(0,"input",3),2&e){const e=a.oxw();a.ekj("is-invalid",e.displayError),a.Q6J("formControl",e.valueControl)("formlyAttributes",e.field)}}let Te=(()=>{class e extends ae{ngOnInit(){this.onInit()}get type(){return this.to.type||"text"}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=a.n5z(e)))(i||e)}}(),e.\u0275cmp=a.Xpm({type:e,selectors:[["app-input"]],features:[a.qOj],decls:3,vars:2,consts:[["class","form-control",3,"type","formControl","formlyAttributes","is-invalid",4,"ngIf","ngIfElse"],["numberTmp",""],[1,"form-control",3,"type","formControl","formlyAttributes"],["type","number",1,"form-control",3,"formControl","formlyAttributes"]],template:function(e,t){if(1&e&&(a.YNc(0,qe,1,5,"input",0),a.YNc(1,Se,1,4,"ng-template",null,1,a.W1O)),2&e){const e=a.MAs(2);a.Q6J("ngIf","number"!==t.type)("ngIfElse",e)}},directives:[s.O5,h.Fj,h.JJ,h.oH,q.VQ,h.wV],styles:[""],changeDetection:0}),e})();var Je=i(2340),Ye=i(3461),Me=i(3815),Qe=i(4806),De=i(3647);function Ue(e,t){if(1&e&&(a.TgZ(0,"th",6),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.Oqu(e.name)}}function Le(e,t){1&e&&a.GkF(0)}function Re(e,t){if(1&e&&(a.TgZ(0,"div",23),a._uU(1),a.qZA()),2&e){const e=a.oxw().$implicit,t=a.oxw().$implicit,i=a.oxw();a.Q6J("title",i.table.getTranslatedValue(i.getValue(t,e.path))),a.xp6(1),a.Oqu(i.table.getTranslatedValue(i.getValue(t,e.path)))}}function Ee(e,t){if(1&e&&(a.TgZ(0,"div",23),a._uU(1),a.qZA()),2&e){const e=a.oxw().$implicit,t=a.oxw().$implicit,i=a.oxw();a.Q6J("title",i.getValue(t,e.path)),a.xp6(1),a.Oqu(i.getValue(t,e.path))}}function Fe(e,t){if(1&e&&(a.TgZ(0,"td"),a.YNc(1,Le,1,0,"ng-container",20),a.YNc(2,Re,2,2,"ng-template",null,21,a.W1O),a.YNc(4,Ee,2,2,"ng-template",null,22,a.W1O),a.qZA()),2&e){const e=t.$implicit,i=a.MAs(3),s=a.MAs(5);a.xp6(1),a.Q6J("ngIf",null==e?null:e.translatable)("ngIfThen",i)("ngIfElse",s)}}function je(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"td",24),a.TgZ(2,"formly-form",25),a.NdJ("modelChange",function(t){a.CHM(e);const i=a.oxw().$implicit;return a.oxw().childChanges(t,i.id)}),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw().$implicit,t=a.oxw();a.xp6(1),a.Q6J("colSpan",t.table.columns.length+3),a.xp6(1),a.Q6J("model",t.getModel(e.id))("fields",t.getHasManyFields(e.id))("form",t.formGroup)("options",t.options)}}function Be(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"tbody",10),a.TgZ(1,"tr"),a.TgZ(2,"td"),a.TgZ(3,"div",11),a._UZ(4,"i",12),a.qZA(),a.qZA(),a.YNc(5,Fe,6,3,"td",13),a.TgZ(6,"td"),a.TgZ(7,"button",14),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().remove(t.id)}),a._UZ(8,"i",15),a.TgZ(9,"span",16),a._uU(10,"Remove"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"td"),a.TgZ(12,"button",17),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().expand(t.id)}),a._UZ(13,"i",18),a.qZA(),a.qZA(),a.qZA(),a.YNc(14,je,3,5,"tr",19),a.qZA()}if(2&e){const e=t.$implicit,i=a.oxw();a.xp6(5),a.Q6J("ngForOf",i.table.columns),a.xp6(9),a.Q6J("ngIf",i.isExpanded(e.id))}}let He=(()=>{class e extends q.fS{constructor(e,t,i,s){super(),this.changeRef=e,this.modalService=t,this.resourcesService=i,this.tableService=s,this.bsModalRef=null,this.subscriptions=[],this.resourceName=null,this.rows=[],this.sorting={sortBy:"order",sortDir:"asc"},this.formGroup=new h.cw({}),this.expandedSections={},this.defaultLocale=Je.N.defaultLocale,this.table=new r.i(i,s)}ngOnInit(){var e,t,i,s,o;this.resourceName=(null===(t=null===(e=this.to)||void 0===e?void 0:e.main)||void 0===t?void 0:t.resource)||null,this.table.resourceName=this.resourceName,this.defaultLocale=(null===(i=this.to)||void 0===i?void 0:i.defaultLocale)||Je.N.defaultLocale,this.loadTable(this.formControl.value||[],this.table,null===(o=null===(s=this.to)||void 0===s?void 0:s.main)||void 0===o?void 0:o.resource,this.sorting),this.subscriptions.push(this.formControl.valueChanges.subscribe(e=>{var t,i;this.loadTable(e,this.table,null===(i=null===(t=this.to)||void 0===t?void 0:t.main)||void 0===i?void 0:i.resource,this.sorting)})),this.subscriptions.push(this.table.onLoaded.subscribe(e=>{e&&this.changeRef.detectChanges()}))}loadTable(e,t,i,s){if(e&&e.length>0){e=e.sort((e,t)=>{const i=(null==e?void 0:e.order)||0,s=(null==t?void 0:t.order)||0;return i<s?-1:i>s?1:0});const n=[];for(const t of e)n.push(t.id);const r=n.join(",");i&&t&&t.loadData(i,new o.CE({resource:i,resourceIds:r.length>0?r:"empty",sorting:s}))}}remove(e){const t=this.formControl.value.filter(t=>t.id!==e);this.formControl.setValue(t)}get columnMode(){return Q.hq.flex}getHasManyFields(e){var t,i,s,o,n,r,l,a,c,d;return[{key:"children",type:"hasMany",templateOptions:{label:null===(i=null===(t=this.to)||void 0===t?void 0:t.child)||void 0===i?void 0:i.label,resource:null===(o=null===(s=this.to)||void 0===s?void 0:s.child)||void 0===o?void 0:o.resource,searchBy:null===(r=null===(n=this.to)||void 0===n?void 0:n.child)||void 0===r?void 0:r.searchBy,hideDragHandle:!0,filter:[null===(a=null===(l=this.to)||void 0===l?void 0:l.child)||void 0===a?void 0:a.filter,{column:null===(d=null===(c=this.to)||void 0===c?void 0:c.child)||void 0===d?void 0:d.relationKey,comparator:"=",value:e}]}}]}openModalWithComponent(){var e,t,i,s;const o={resourceName:(null===(t=null===(e=this.to)||void 0===e?void 0:e.main)||void 0===t?void 0:t.resource)||null,filter:null,searchBy:(null===(s=null===(i=this.to)||void 0===i?void 0:i.main)||void 0===s?void 0:s.searchBy)||null,formControl:this.formControl},n=this.formControl.value||[];this.bsModalRef=this.modalService.show(Qe.R,{initialState:o,class:"modal-lg"}),this.bsModalRef.content.onAddData.subscribe(e=>{this.formControl.setValue([...n,...e])})}drop(e){(0,Ye.bA)(this.table.rows,e.previousIndex,e.currentIndex);const t=this.formControl.value.map(e=>{const t=this.table.rows.findIndex(t=>t.id===e.id);return e.order=-1!==t?t:0,e});this.formControl.setValue(t,{emitEvent:!1})}getValue(e,t){return(0,Me.get)(e,t)}childChanges(e,t){if(e&&(null==e?void 0:e.children)&&(null==e?void 0:e.children.length)>0){const i=this.formControl.value||[],s=i.find(e=>e.id===t);void 0!==s&&(s.children=null==e?void 0:e.children),this.formControl.setValue(i,{emitEvent:!1})}}getModel(e){const t=this.formControl.value.find(t=>t.id===e);return void 0===t||t.hasOwnProperty("children")||(t.children=[]),void 0!==t?t:{}}isExpanded(e){return this.expandedSections.hasOwnProperty(e)||(this.expandedSections[e]=!1),this.expandedSections[e]}expand(e){this.expandedSections.hasOwnProperty(e)||(this.expandedSections[e]=!1);for(const t in this.expandedSections)this.expandedSections.hasOwnProperty(t)&&t!==e&&(this.expandedSections[t]=!1);this.expandedSections[e]=!1===this.expandedSections[e]}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(a.sBO),a.Y36(De.tT),a.Y36(o.z6),a.Y36(u.w))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-has-many"]],features:[a._Bn([u.w,o.z6]),a.qOj],decls:17,vars:3,consts:[[1,"card","mt-3"],[1,"card-header","mb-0"],["type","button",1,"btn","btn-success","btn-sm","float-end",3,"click"],[1,"bi","bi-plus-circle"],[1,"card-body","p-0"],["cdkDropList","","id","has-many-cascade-dlist",1,"table","mb-0","w-100",3,"cdkDropListDropped"],["scope","col"],["scope","col",4,"ngFor","ngForOf"],["scope","col",1,"text-end",2,"width","10%"],["cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragLockAxis","y"],["cdkDragHandle","",1,"pointer-grab"],[1,"bi","bi-list"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-danger","btn-sm","float-end",3,"click"],[1,"bi","bi-trash"],[1,"d-none","d-xl-inline-block"],["type","button",1,"btn",3,"click"],[1,"bi","bi-caret-down-fill"],[4,"ngIf"],[4,"ngIf","ngIfThen","ngIfElse"],["thenBlock",""],["elseBlock",""],[1,"text-truncate","pr-2",2,"max-width","200px",3,"title"],[3,"colSpan"],[3,"model","fields","form","options","modelChange"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"h5",1),a._uU(2),a.TgZ(3,"button",2),a.NdJ("click",function(){return t.openModalWithComponent()}),a._UZ(4,"i",3),a._uU(5," Add "),a.qZA(),a.qZA(),a.TgZ(6,"div",4),a.TgZ(7,"table",5),a.NdJ("cdkDropListDropped",function(e){return t.drop(e)}),a.TgZ(8,"thead"),a.TgZ(9,"tr"),a.TgZ(10,"th",6),a._uU(11,"#"),a.qZA(),a.YNc(12,Ue,2,1,"th",7),a.TgZ(13,"th",8),a._uU(14,"Actions"),a.qZA(),a._UZ(15,"th",8),a.qZA(),a.qZA(),a.YNc(16,Be,15,2,"tbody",9),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(2),a.hij(" ",null==t.to||null==t.to.main?null:t.to.main.label," "),a.xp6(10),a.Q6J("ngForOf",t.table.columns),a.xp6(4),a.Q6J("ngForOf",t.table.rows))},directives:[Ye.Wj,s.sg,Ye.Zt,Ye.Bh,s.O5,q.T7],styles:[""],changeDetection:0}),e})();const Pe=[{path:":name",component:V},{path:":name/create",component:te},{path:":name/:id/edit",component:te}];let Ve=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[s.ez,Q.xD,c.Bz.forChild(Pe),le.f.forRoot(),O.forRoot(),ie.z$,h.UX,q.X0.forChild({extras:{lazyRender:!0},wrappers:[{name:"translatable",component:Oe},{name:"panel",component:se.Z},{name:"layout",component:ye}],types:[{name:"images",component:oe.Pw,wrappers:["form-field"]},{name:"repeat",component:ne.$},{name:"hasMany",component:re.a},{name:"hasManyCascade",component:He},{name:"translatable-textarea",component:he},{name:"translatable-input",component:Te}]})]]}),e})()}}]);